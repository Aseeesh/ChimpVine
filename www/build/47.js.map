{"version":3,"sources":["../../src/core/grades/pages/courses/courses.module.ts","../../src/core/grades/pages/courses/courses.ts"],"names":[],"mappings":"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","file":"47.js","sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CoreGradesCoursesPage } from './courses';\nimport { CoreComponentsModule } from '@components/components.module';\nimport { CoreDirectivesModule } from '@directives/directives.module';\n\n@NgModule({\n    declarations: [\n        CoreGradesCoursesPage\n    ],\n    imports: [\n        CoreComponentsModule,\n        CoreDirectivesModule,\n        IonicPageModule.forChild(CoreGradesCoursesPage),\n        TranslateModule.forChild()\n    ],\n})\nexport class CoreGradesCoursesPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/grades/pages/courses/courses.module.ts","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, ViewChild } from '@angular/core';\nimport { IonicPage, Content } from 'ionic-angular';\nimport { CoreGradesProvider } from '../../providers/grades';\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\nimport { CoreSplitViewComponent } from '@components/split-view/split-view';\nimport { CoreGradesHelperProvider } from '../../providers/helper';\nimport { CoreTagProvider } from '@core/tag/providers/tag';\nimport { CoreTagAreaDelegate } from '@core/tag/providers/area-delegate';\n\n/**\n * Page that displays courses grades (main menu option).\n */\n@IonicPage({ segment: 'core-grades-courses' })\n@Component({\n    selector: 'page-core-grades-courses',\n    templateUrl: 'courses.html',\n})\nexport class CoreGradesCoursesPage {\n    @ViewChild(Content) content: Content;\n    @ViewChild(CoreSplitViewComponent) splitviewCtrl: CoreSplitViewComponent;\n\n    grades = [];\n    courseId: number;\n    userId: number;\n    gradesLoaded = false;\n    tagName: string;\n    collectionId: number;\n    areaId: number;\n    fromContextId: number;\n    contextId: number;\n    recursive: boolean;\n    areas: Array<{\n        id: number,\n        componentName: string,\n        itemType: string,\n        nameKey: string,\n        items: any[],\n        canLoadMore: boolean,\n        badge: string\n    }>;\n    tagId: number;\n    selectedAreaId: number;\n    hasUnsupportedAreas = false;\n    iosSharedFiles: number;\n    protected sitesObserver: any;\n    protected isDestroyed = false;\n    categorylist: {categoryId: number, categoryName: string, link: string}[];\n    accordindata: { grade: string; \n        subjectList?: {subjectId: number,\n                    category?: {categoryId: number, categoryName: string, link: string}[],\n                    rawgrade: any, courseFullName: string, showCategoryDetails?: boolean, icon?: string;}[];\n     icon?: string; showDetails?: boolean; }[];\n    activeActive: any;\n\n    constructor(private gradesProvider: CoreGradesProvider, private domUtils: CoreDomUtilsProvider,\n        private gradesHelper: CoreGradesHelperProvider,\n        private tagProvider: CoreTagProvider,\n        private tagAreaDelegate: CoreTagAreaDelegate) {\n            this.accordindata=[\n                { grade: 'Pre-k '},\n                { grade: 'KinderGarden '},\n                { grade: '1st Grade '},\n                { grade: '2nd Grade '},\n                { grade: '3rd Grade '},\n                { grade: '4th Grade'},\n                { grade: '5th Grade'},\n                { grade: '6th Grade'},\n                { grade: '7th Grade'},\n                { grade: '8th Grade'},\n                // { grade: '9th Grade'},\n                // { grade: '10th Grade'} \n              \n              ]\n              this.categorylist = [\n                  { categoryId: 1, categoryName: \"Games\", link: \"\" },\n                  { categoryId: 2, categoryName: \"Quizzes\", link: \"\"}\n                ]\n              this.accordindata.forEach(element => {\n                  element.subjectList= [\n                       {subjectId: 11, category: this.categorylist, rawgrade: null, courseFullName: \"Math\", showCategoryDetails: false, icon: 'ios-add-circle-outline'},\n                      {subjectId: 39, category: this.categorylist, rawgrade: null, courseFullName: \"English\", showCategoryDetails: false, icon: 'ios-add-circle-outline'},\n                       {subjectId: 13, category: this.categorylist, rawgrade: null, courseFullName: \"Science\", showCategoryDetails: false, icon: 'ios-add-circle-outline'},\n                       {subjectId: 14, category: this.categorylist, rawgrade: null, courseFullName: \"Social Studies\", showCategoryDetails: false, icon: 'ios-add-circle-outline'}];\n                 element.icon= 'ios-add-circle-outline', element.showDetails= false\n              });\n              this.activeActive='gradeList';\n    }\n\n\n    setActiveTag(tag){\n        this.activeActive=tag; \n        }\n    toggleDetails(data) {\n        if (data.showDetails) {\n          data.showDetails = false;\n          data.icon = 'ios-add-circle-outline';\n        } else {\n          data.showDetails = true;\n          data.icon = 'ios-remove-circle-outline';\n        }\n      }\n\n      toggleCatgoryDetails(data) {\n        if (data.showCategoryDetails) {\n          data.showCategoryDetails = false;\n          data.icon = 'ios-add-circle-outline';\n        } else {\n          data.showCategoryDetails = true;\n          data.icon = 'ios-remove-circle-outline';\n        }\n      }\n      GetTagDetails(tagName): Promise<any> { \n        this.tagName = tagName.replace(/\\s/g, '');//\"Pre-k/Math/Games\";\n        this.recursive = true;\n        this.collectionId = 6;\n        this.tagId = 0;\n        this.fromContextId = 0;\n        this.areaId = 0;\n        this.contextId = 0;\n        return this.tagProvider.getTagIndexPerArea(this.tagId, this.tagName, this.collectionId, this.areaId, this.fromContextId,\n                this.contextId, this.recursive, 0).then((areas) => {\n            this.areas = [];\n            this.hasUnsupportedAreas = false;\n\n            return Promise.all(areas.map((area) => {\n                return this.tagAreaDelegate.parseContent(area.component, area.itemtype, area.content).then((items) => {\n                    if (!items || !items.length) {\n                        // Tag area not supported, skip.\n                        this.hasUnsupportedAreas = true;\n\n                        return null;\n                    }\n\n                    return {\n                        id: area.ta,\n                        componentName: area.component,\n                        itemType: area.itemtype,\n                        nameKey: this.tagAreaDelegate.getDisplayNameKey(area.component, area.itemtype),\n                        items,\n                        canLoadMore: !!area.nextpageurl,\n                        badge: items && items.length ? items.length + (area.nextpageurl ? '+' : '') : '',\n                    };\n                });\n            })).then((areas) => {\n                debugger\n                this.areas = areas.filter((area) => area != null);\n                if(this.areas.length>0){\n                    this.openArea(this.areas[0]);\n                }\n            });\n        }).catch((error) => {\n            this.domUtils.showErrorModalDefault(error, 'Error loading tag index');\n        });\n    }\n\n    openArea(area: any): void {\n        \n        this.selectedAreaId = area.id; \n        const params = {\n            tagId: this.tagId,\n            tagName: this.tagName,\n            collectionId: this.collectionId,\n            areaId: area.id,\n            fromContextId: this.fromContextId,\n            contextId: this.contextId,\n            recursive: this.recursive,\n            areaNameKey: area.nameKey,\n            componentName: area.component,\n            itemType: area.itemType,\n            items: area.items.slice(),\n            canLoadMore: area.canLoadMore,\n            nextPage: 1\n        };\n        this.splitviewCtrl.isOn()\n        this.splitviewCtrl.push('CoreTagIndexAreaPage', params);\n    }\n    /**\n     * View loaded.\n     */\n    ionViewDidLoad(): void {\n        if (this.courseId) {\n            // There is the course to load, open the course in a new state.\n            this.gotoCourseGrades(this.courseId);\n        }\n\n        this.fetchData().then(() => {\n            if (!this.courseId && this.splitviewCtrl.isOn() && this.grades.length > 0) {\n                this.gotoCourseGrades(this.grades[0].courseid);\n            }\n\n            // Add log in Moodle.\n            return this.gradesProvider.logCoursesGradesView().catch(() => {\n                // Ignore errors.\n            });\n        }).finally(() => {\n            this.gradesLoaded = true;\n        });\n    }\n\n    /**\n     * Fetch all the data required for the view.\n     *\n     * @return Resolved when done.\n     */\n    fetchData(): Promise<any> {\n        return this.gradesProvider.getCoursesGrades().then((grades) => {\n            return this.gradesHelper.getGradesCourseData(grades).then((grades) => {\n               this.grades = grades;\n            });\n        }).catch((error) => {\n            this.domUtils.showErrorModalDefault(error, 'Error loading grades');\n        });\n    }\n\n    /**\n     * Refresh data.\n     *\n     * @param refresher Refresher.\n     */\n    refreshGrades(refresher: any): void {\n        this.gradesProvider.invalidateCoursesGradesData().finally(() => {\n            this.fetchData().finally(() => {\n                refresher.complete();\n            });\n        });\n    }\n\n    /**\n     * Navigate to the grades of the selected course.\n     * @param courseId Course Id where to navigate.\n     */\n    gotoCourseGrades(courseId: number): void {\n        this.courseId = courseId;\n        this.splitviewCtrl.push('CoreGradesCoursePage', {courseId: courseId, userId: this.userId});\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/grades/pages/courses/courses.ts"],"sourceRoot":""}